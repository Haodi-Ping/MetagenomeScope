<!DOCTYPE html>
<!--
    Copyright (C) 2016- Marcus Fedarko, Jay Ghurye, Todd Treangen, Mihai Pop
    Authored by Marcus Fedarko

    This file is part of MetagenomeScope.

    MetagenomeScope is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    MetagenomeScope is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with MetagenomeScope.  If not, see <http://www.gnu.org/licenses/>.
-->
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width,initial-scale=1,user-scalable=no"
        />
        <meta
            name="description"
            content="Web application for the hierarchical visualization of metagenomic assembly graphs."
        />
        <title>MetagenomeScope</title>
        <link rel="shortcut icon" href="bubble.ico" />
        <!-- Load external libraries -->
        <link rel="stylesheet" href="vendor/css/bootstrap.min.css" />
        <link rel="stylesheet" href="css/viewer_style.css" />
        <link
            rel="stylesheet"
            href="vendor/css/bootstrap-colorpicker.min.css"
        />
        <script src="vendor/js/jquery-3.2.1.min.js"></script>
        <script src="vendor/js/cytoscape.min.js"></script>
        <!-- NOTE if including Cytoscape.js layout plugins for testing, those
             can go here -->
        <script src="vendor/js/sql.js"></script>
        <script src="js/xdot2cy.js"></script>
        <script src="vendor/js/bootstrap.min.js"></script>
        <script src="vendor/js/bootstrap-colorpicker.min.js"></script>
        <script src="vendor/js/d3.v4.min.js"></script>
        <!-- Initialize some event bindings for the application -->
        <script>
            $(function () {
                $(window).on("beforeunload", doThingsBeforeUnload);
                // $(f) is an alias for $().ready(f), where f is a function
                // So the external function here should will only be called
                // when the DOM is ready to be manipulated
                doThingsWhenDOMReady(false);
                checkFileAPIAvailability();
            });
        </script>
    </head>
    <body>
        <!-- Invisible <a> used for downloading data URIs for various purposes
             (e.g. path exporting, color settings export). By adjusting the
             download parameter of this tag, we can provide the user with a
             suggested filename for the file to be downloaded (instead of just
             opening the data URI using window.open()).
        -->
        <a class="notviewable" id="downloadHelper"></a>
        <!-- Absolutely positioned tools -->
        <div id="controlsToggler" onclick="toggleControls();" class="btn">
            <span class="glyphicon glyphicon-menu-hamburger"></span>
        </div>

        <!-- NOTE: For all Bootstrap buttons, we need to do two "layers"
             of disabling. Adding the disabled class to a button makes
             Bootstrap style the button to look disabled, but the button
             will still be usable. Adding the disabled="disabled" attribute
             makes the button actually disabled (i.e. not usable).
        
             To handle this properly, we use the enableButton and
             disableButton functions (defined in xdot2cy.js) to ensure
             buttons are always properly disabled/enabled.
        -->
        <button
            class="btn btn-default btn-sm disabled"
            onclick="exportGraphView();"
            id="floatingExportButton"
            disabled="disabled"
        >
            <span class="glyphicon glyphicon-camera"></span>
        </button>

        <button
            class="btn btn-default btn-sm disabled"
            onclick="fitGraph(false)"
            id="fitButton"
            disabled="disabled"
        >
            <span class="glyphicon glyphicon-resize-full"></span>
        </button>

        <button
            class="btn btn-default btn-sm disabled"
            onclick="fitGraph(true)"
            id="fitSelectedButton"
            disabled="disabled"
        >
            <span class="glyphicon glyphicon-resize-small"></span>
        </button>

        <div id="controls">
            <!-- TODO replace these headers with a nicer-looking system? -->
            <h4 style="margin-top: 26px;">File Selection and Setup</h4>
            <p>
                <!-- Ideally this would use a fancy Bootstrap tooltip, but there
                are some issues I've run into with applying tooltips to
                disabled buttons; easiest + most consistent to just set the
                title attribute.
            -->
                <button
                    class="btn btn-default btn-sm disabled"
                    disabled="disabled"
                    id="xmlFileselectButton"
                    onclick="openFileSelectDialog();"
                    title="Demoing .db files is only supported when accessing the viewer interface non-locally (i.e. using a http or https protocol)."
                >
                    <span
                        class="glyphicon glyphicon-repeat"
                        aria-hidden="true"
                    ></span>
                    &nbsp; Demo .db file
                </button>
                <button
                    class="btn btn-default btn-sm"
                    id="fileselectButton"
                    onclick="$('#fileselector').click();"
                >
                    <span
                        class="glyphicon glyphicon-folder-open"
                        aria-hidden="true"
                    ></span>
                    &nbsp; Upload .db file
                </button>
                <!-- For some reason, styling this with the "notviewable" CSS class
                doesn't work; I suspect it's due to the way browsers handle
                styling of file inputs. Anyway, this should work fine. -->
                <input
                    type="file"
                    id="fileselector"
                    onchange="loadLocalDB();"
                    style="display: none;"
                />

                <button
                    class="btn btn-default btn-sm disabled"
                    disabled="disabled"
                    onclick="displayInfo();"
                    id="infoButton"
                >
                    <span
                        class="glyphicon glyphicon-info-sign"
                        aria-hidden="true"
                    ></span>
                    &nbsp; Assembly info
                </button>
                <button
                    class="btn btn-default btn-sm"
                    id="settingsButton"
                    onclick="displaySettings();"
                >
                    <span class="glyphicon glyphicon-cog"></span> &nbsp;
                    <span>Settings</span>
                </button>

                <button
                    class="btn btn-default btn-sm"
                    id="helpButton"
                    onclick="openHelp();"
                >
                    <span class="glyphicon glyphicon-question-sign"></span>
                    &nbsp;
                    <span>Help</span>
                </button>
                <button
                    class="btn btn-default btn-sm"
                    id="openTestDialogButton"
                    onclick="displayTests();"
                >
                    <span class="glyphicon glyphicon-dashboard"></span> &nbsp;
                    <span>Open Test Dialog</span>
                </button>
            </p>
            <div class="progress">
                <div
                    class="progress-bar notransitions"
                    role="progressbar"
                    aria-valuenow="0"
                    aria-valuemin="0"
                    aria-valuemax="100"
                    style="width: 100%;"
                >
                    <span class="sr-only"></span>
                </div>
            </div>
            <div id="textStatus">&nbsp;</div>
            <hr />

            <div id="connectedComponentControls">
                <h4>Standard Mode</h4>

                <div class="input-group input-group-sm">
                    <span class="input-group-btn">
                        <button
                            class="btn btn-default disabled"
                            disabled="disabled"
                            onclick='decrCompRank("componentselector");'
                            type="button"
                            id="decrCompRankButton"
                            aria-label="Decrement component size rank by 1"
                        >
                            <span
                                class="glyphicon glyphicon-minus"
                                aria-hidden="true"
                            >
                            </span>
                        </button>
                    </span>
                    <input
                        type="number"
                        class="form-control"
                        id="componentselector"
                        value="1"
                        min="1"
                        disabled="disabled"
                    />
                    <span class="input-group-btn">
                        <button
                            class="btn btn-default disabled"
                            disabled="disabled"
                            onclick='incrCompRank("componentselector");'
                            type="button"
                            id="incrCompRankButton"
                            aria-label="Increment component size rank by 1"
                        >
                            <span
                                class="glyphicon glyphicon-plus"
                                aria-hidden="true"
                            >
                            </span>
                        </button>
                    </span>
                </div>
                <button
                    class="btn btn-default btn-sm disabled"
                    disabled="disabled"
                    onclick='startDrawComponent("double");'
                    type="button"
                    id="drawButton"
                >
                    <span
                        class="glyphicon glyphicon-pencil"
                        aria-hidden="true"
                    ></span>
                    &nbsp; Draw connected component
                </button>
                <hr />
            </div>
            <div id="spqrConnectedComponentControls">
                <h4>SPQR Decomposition Mode</h4>

                <div class="input-group input-group-sm">
                    <span class="input-group-btn">
                        <button
                            class="btn btn-default disabled"
                            disabled="disabled"
                            onclick='decrCompRank("SPQRcomponentselector");'
                            type="button"
                            id="decrSPQRCompRankButton"
                            aria-label="Decrement component size rank by 1"
                        >
                            <span
                                class="glyphicon glyphicon-minus"
                                aria-hidden="true"
                            >
                            </span>
                        </button>
                    </span>
                    <input
                        type="number"
                        class="form-control"
                        id="SPQRcomponentselector"
                        value="1"
                        min="1"
                        disabled="disabled"
                    />
                    <span class="input-group-btn">
                        <button
                            class="btn btn-default disabled"
                            disabled="disabled"
                            onclick='incrCompRank("SPQRcomponentselector");'
                            type="button"
                            id="incrSPQRCompRankButton"
                            aria-label="Increment component size rank by 1"
                        >
                            <span
                                class="glyphicon glyphicon-plus"
                                aria-hidden="true"
                            >
                            </span>
                        </button>
                    </span>
                </div>
                <button
                    class="btn btn-default btn-sm disabled"
                    disabled="disabled"
                    onclick='startDrawComponent("SPQR");'
                    type="button"
                    id="drawSPQRButton"
                >
                    <span
                        class="glyphicon glyphicon-pencil"
                        aria-hidden="true"
                    ></span>
                    &nbsp; Draw connected component
                </button>
                <div
                    class="btn-group"
                    data-toggle="buttons"
                    id="decompositionOptionButtonGroup"
                    aria-label="SPQR Decomposition Options"
                >
                    <button
                        class="btn btn-default active disabled btn-sm"
                        value="implicit"
                        id="implicitSPQROption"
                        disabled="disabled"
                    >
                        <input
                            type="radio"
                            name="spqrDecomposition"
                            id="implicitSPQRtrees"
                            autocomplete="off"
                        />Implicit
                    </button>
                    <button
                        class="btn btn-default disabled btn-sm"
                        value="explicit"
                        id="explicitSPQROption"
                        disabled="disabled"
                    >
                        <input
                            type="radio"
                            name="spqrDecomposition"
                            id="explicitSPQRtrees"
                            autocomplete="off"
                        />Explicit
                    </button>
                </div>

                <hr />
            </div>
            <div id="selectedElementControls">
                <h4>Selected Elements</h4>

                <!-- Selected node info -->
                <div class="selectedEleHeader" onclick="toggleEleInfo('node');">
                    Nodes <span class="badge" id="selectedNodeBadge">0</span>
                    <span
                        class="glyphicon glyphicon-triangle-right opener"
                        id="nodeOpener"
                    ></span>
                </div>
                <div id="nodeInfo" class="notviewable">
                    <table id="nodeInfoTable" class="eleInfoTable">
                        <tr>
                            <th colspan="6" id="nodeTH">
                                Selected Node Information
                            </th>
                        </tr>
                        <tr>
                            <th>ID</th>
                            <th id="labelCol">Label</th>
                            <th>Length</th>
                            <th id="depthCol">Depth</th>
                            <th id="gcContentCol">GC Content</th>
                            <!-- We make this notviewable at the start so that
                                 the node info table doesn't get too wide.
                                 We can (and probably should) change this in
                                 the future, though.
                            -->
                            <th id="repeatCol" class="notviewable">
                                Is Repeat?
                            </th>
                        </tr>
                    </table>
                </div>
                <!-- Selected edge info -->
                <div class="selectedEleHeader" onclick="toggleEleInfo('edge');">
                    Edges <span class="badge" id="selectedEdgeBadge">0</span>
                    <span
                        class="glyphicon glyphicon-triangle-right opener"
                        id="edgeOpener"
                    ></span>
                </div>
                <div id="edgeInfo" class="notviewable">
                    <table id="edgeInfoTable" class="eleInfoTable">
                        <tr>
                            <th colspan="6" id="edgeTH">
                                Selected Edge Information
                            </th>
                        </tr>
                        <tr>
                            <th>Src ID</th>
                            <th>Tgt ID</th>
                            <th id="multiplicityCol">Multiplicity</th>
                            <th id="orientationCol">Orient</th>
                            <th id="meanCol">Mean</th>
                            <th id="stdevCol">Std. Dev</th>
                        </tr>
                    </table>
                </div>
                <!-- Selected cluster info -->
                <div
                    class="selectedEleHeader"
                    onclick="toggleEleInfo('cluster');"
                >
                    Clusters
                    <span class="badge" id="selectedClusterBadge">0</span>
                    <span
                        class="glyphicon glyphicon-triangle-right opener"
                        id="clusterOpener"
                    ></span>
                </div>
                <div id="clusterInfo" class="notviewable">
                    <table id="clusterInfoTable" class="eleInfoTable">
                        <tr>
                            <th colspan="2">Selected Cluster Information</th>
                        </tr>
                        <tr>
                            <th>Cluster Type</th>
                            <th>Node Count</th>
                        </tr>
                    </table>
                </div>

                <hr />
            </div>
            <div id="searchForElementsControls">
                <h4>Search for Nodes</h4>
                <div class="input-group input-group-sm">
                    <!-- CODELINK:
                         https://getbootstrap.com/docs/3.3/components/#input-groups-buttons-dropdowns
                    -->
                    <div class="input-group-btn">
                        <button
                            type="button"
                            data-toggle="dropdown"
                            id="searchTypeButton"
                            disabled="disabled"
                            class="btn btn-default dropdown-toggle disabled"
                            aria-haspopup="true"
                            aria-expanded="false"
                        >
                            ID <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            <li id="IDSearchTypeOption">
                                <a onclick="toggleSearchType('ID');">ID</a>
                            </li>
                            <li id="LabelSearchTypeOption">
                                <a onclick="toggleSearchType('Label');"
                                    >Label</a
                                >
                            </li>
                        </ul>
                    </div>
                    <input
                        type="text"
                        class="form-control"
                        id="searchInput"
                        placeholder="Node ID(s)"
                        disabled="disabled"
                    />
                    <span class="input-group-btn">
                        <button
                            class="btn btn-default disabled"
                            disabled="disabled"
                            onclick="searchForEles();"
                            type="button"
                            id="searchButton"
                            aria-label="Search"
                        >
                            <span
                                class="glyphicon glyphicon-search"
                                aria-hidden="true"
                            ></span>
                        </button>
                    </span>
                </div>
                <hr />
            </div>
            <div id="displayOptionsControls">
                <h4>Display Options</h4>
                <p id="collapseButtonControls">
                    <!-- Value of this button will be toggled as all nodes in graph
                     are collapsed/uncollapsed -->
                    <button
                        class="btn btn-default btn-sm disabled"
                        disabled="disabled"
                        id="collapseButton"
                        onclick="startCollapseAll();"
                    >
                        <span
                            id="collapseButtonIcon"
                            class="glyphicon glyphicon-minus-sign"
                        ></span>
                        &nbsp;
                        <span id="collapseButtonText"
                            >Collapse all node groups
                        </span>
                    </button>
                </p>

                <p>
                    <button
                        class="btn btn-default btn-sm disabled"
                        disabled="disabled"
                        id="reduceEdgesButton"
                        onclick="reduceEdgesToStraightLines(true);"
                    >
                        <span class="glyphicon glyphicon-sort"></span> &nbsp;
                        <span>Straighten non-collapsed edges</span>
                    </button>
                </p>

                <p>
                    <button
                        class="btn btn-default btn-sm disabled"
                        disabled="disabled"
                        id="filterEdgesButton"
                        onclick="openEdgeFilteringDialog();"
                    >
                        <span class="glyphicon glyphicon-filter"></span> &nbsp;
                        <span>Filter edges by weight</span>
                    </button>
                </p>

                <hr />
            </div>
            <div id="nodeColorizationControls">
                <h4>Node Colorization</h4>
                <div class="radio" id="nodeColorizationRadioButtonGroup">
                    <label class="radio-inline">
                        <input
                            type="radio"
                            name="nodeColorization"
                            disabled
                            id="noneColorization"
                            value="noncolorized"
                            checked
                        />
                        None
                    </label>
                    <label class="radio-inline">
                        <input
                            type="radio"
                            name="nodeColorization"
                            disabled
                            id="gcColorization"
                            value="gccolorized"
                        />
                        GC content
                    </label>
                    <label class="radio-inline">
                        <input
                            type="radio"
                            name="nodeColorization"
                            disabled
                            id="repeatColorization"
                            value="repeatcolorized"
                        />
                        Repeats
                    </label>
                    <!--
                        NOTE commenting out unused colorization methods for
                        now; will likely uncomment in future.
                    <label class="radio-inline">
                        <input type="radio" name="nodeColorization" disabled
                            id="geneColorization" value="genecolorized">
                        Gene content
                    </label>
                    <label class="radio-inline">
                        <input type="radio" name="nodeColorization" disabled
                            id="depthColorization" value="depthcolorized">
                        Depth
                    </label>
                    -->
                </div>
                <button
                    class="btn btn-default btn-sm disabled"
                    disabled="disabled"
                    id="changeNodeColorizationButton"
                    onclick="startChangeNodeColorization();"
                >
                    <span class="glyphicon glyphicon-check"></span> &nbsp; Apply
                </button>

                <hr />
            </div>
            <div id="viewScaffoldsControls">
                <h4>View Scaffolds</h4>

                <button
                    class="btn btn-default btn-sm disabled"
                    id="scaffoldFileselectButton"
                    disabled="disabled"
                    onclick="$('#scaffoldFileSelector').click();"
                >
                    <span
                        class="glyphicon glyphicon-folder-open"
                        aria-hidden="true"
                    ></span>
                    &nbsp; Upload AGP file
                </button>
                <input
                    type="file"
                    id="scaffoldFileSelector"
                    onchange="beginLoadAGPfile();"
                    style="display: none;"
                />

                <p id="agpLoadedFileName" class="notviewable monospace"></p>
                <p id="scaffoldInfoHeader" class="notviewable"></p>
                <p id="scaffoldCycler" class="notviewable nonselectable">
                    <span
                        class="glyphicon glyphicon-triangle-left cyclerBtn"
                        onclick="cycleScaffoldsLeft();"
                    >
                    </span>
                    <button
                        class="btn btn-default btn-sm"
                        id="drawScaffoldButton"
                        onclick="highlightScaffold(this.innerText);"
                    ></button>
                    <span
                        class="glyphicon glyphicon-triangle-right cyclerBtn"
                        onclick="cycleScaffoldsRight();"
                    >
                    </span>
                </p>
                <hr />
            </div>
            <div id="assemblyFinishingControls">
                <h4>Assembly Finishing</h4>

                <p>
                    <button
                        class="btn btn-success btn-sm disabled"
                        id="startFinishingButton"
                        disabled="disabled"
                        onclick="startFinishing();"
                    >
                        <span
                            class="glyphicon glyphicon-play"
                            aria-hidden="true"
                        ></span>
                        &nbsp; Start
                    </button>

                    <button
                        class="btn btn-warning btn-sm disabled"
                        id="pauseFinishingButton"
                        disabled="disabled"
                        onclick="togglePauseFinishing();"
                    >
                        <span
                            id="pauseFinishingButtonIconSpan"
                            class="glyphicon glyphicon-pause"
                            aria-hidden="true"
                        ></span>
                        &nbsp; Pause
                    </button>

                    <button
                        class="btn btn-danger btn-sm disabled"
                        id="endFinishingButton"
                        disabled="disabled"
                        onclick="endFinishing();"
                    >
                        <span
                            class="glyphicon glyphicon-stop"
                            aria-hidden="true"
                        ></span>
                        &nbsp; End
                    </button>
                </p>

                <div
                    class="btn-group"
                    data-toggle="buttons"
                    id="pathExportButtonGroup"
                    aria-label="Path export type (AGP vs. CSV) selector"
                >
                    <button
                        class="btn btn-info active disabled btn-sm"
                        value="AGP"
                        id="agpOption"
                        disabled="disabled"
                    >
                        <input
                            type="radio"
                            name="pathExportTypeRadio"
                            checked="checked"
                            autocomplete="off"
                        />AGP
                    </button>
                    <button
                        class="btn btn-info disabled btn-sm"
                        value="CSV"
                        id="csvOption"
                        disabled="disabled"
                    >
                        <input
                            type="radio"
                            name="pathExportTypeRadio"
                            autocomplete="off"
                        />CSV
                    </button>
                </div>

                <button
                    class="btn btn-info btn-sm disabled"
                    id="exportPathButton"
                    disabled="disabled"
                    onclick="exportPath();"
                >
                    <span
                        class="glyphicon glyphicon-download-alt"
                        aria-hidden="true"
                    ></span>
                    &nbsp; Export Path
                </button>

                <p id="assembledNodes"></p>

                <hr />
            </div>
            <div id="exportGraphViewControls">
                <h4>Export Graph View</h4>
                <div
                    class="btn-group"
                    data-toggle="buttons"
                    id="imgTypeButtonGroup"
                    aria-label="Image type (PNG vs. JPG) selector"
                >
                    <button
                        class="btn btn-default active disabled btn-sm"
                        value="PNG"
                        id="pngOption"
                        disabled="disabled"
                    >
                        <input
                            type="radio"
                            name="imgTypeRadio"
                            checked="checked"
                            autocomplete="off"
                        />PNG
                    </button>
                    <button
                        class="btn btn-default disabled btn-sm"
                        value="JPG"
                        id="jpgOption"
                        disabled="disabled"
                    >
                        <input
                            type="radio"
                            name="imgTypeRadio"
                            autocomplete="off"
                        />JPG
                    </button>
                </div>

                <button
                    class="btn btn-default btn-sm disabled"
                    disabled="disabled"
                    id="exportImageButton"
                    onclick="exportGraphView();"
                >
                    <span class="glyphicon glyphicon-camera"></span> &nbsp;
                    Export
                </button>
            </div>
            <div id="testLayoutsControls">
                <!-- We include the <hr /> here because the testLayoutsControls
                    are optional (may or may not be viewable), but the
                    performanceOptionsControls are always viewable.
                -->
                <hr />
                <h4>Test Layouts</h4>
                <p>
                    See
                    <a
                        class="actuallyalink"
                        target="_blank"
                        href="http://js.cytoscape.org/#layouts"
                        >here</a
                    >
                    for a list of predefined layouts.
                </p>
                <div class="input-group input-group-sm bottom-page-div">
                    <input
                        type="text"
                        class="form-control"
                        placeholder="Layout name"
                        id="layoutInput"
                        disabled="disabled"
                    />
                    <span class="input-group-btn">
                        <button
                            class="btn btn-default disabled"
                            disabled="disabled"
                            onclick="testLayout();"
                            type="button"
                            id="layoutButton"
                            aria-label="Test layout algorithm"
                        >
                            <span
                                class="glyphicon glyphicon-arrow-right"
                                aria-hidden="true"
                            ></span>
                        </button>
                    </span>
                </div>
            </div>
        </div>
        <!-- end controls div -->
        <div id="cy" class="nosubsume"></div>
        <!--container for Cytoscape.js-->
        <!-- CODELINK: The markup defining the base of these modal dialogs is
             adapted from Bootstrap's tutorial on modal dialogs, located at
             https://getbootstrap.com/docs/3.3/javascript/#modals
        -->
        <div class="modal fade" tabindex="-1" role="dialog" id="testDialog">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <!--
                        <button type="button" class="close"
                            data-dismiss="modal" aria-label="Close dialog">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        -->
                        <h4 class="modal-title">
                            Viewer Interface Tests
                        </h4>
                    </div>
                    <!-- end modal-header -->
                    <div class="modal-body">
                        <!-- Mocha/Chai vendor stuff. The CSS should only
                             impact Mocha elements, so this shouldn't mess with
                             the rest of the application.

                             CODELINK: some of this basic HTML/JS (e.g. the
                             tags that load mocha.js and mocha.css, the "mocha"
                             div, the use of mocha.setup() in
                             tests/setup_tests.js) were derived from the
                             environment output by "mocha init", which I
                             refactored to squeeze into this dialog :)
                        -->
                        <link rel="stylesheet" href="tests/vendor/mocha.css" />
                        <script src="tests/vendor/mocha.js"></script>
                        <script src="tests/vendor/chai.js"></script>
                        <!-- Simple code that sets up the Mocha testing
                             environment in relation to the rest of
                             MetagenomeScope.
                        -->
                        <script src="tests/setup_tests.js"></script>
                        <!-- External JS files that define various tests. -->
                        <script src="tests/test_distances.js"></script>
                        <script src="tests/test_button_disabling_enabling.js"></script>
                        <div id="mocha"></div>
                        <!-- In the headless index HTML file, the following
                             script will be used to automatically call
                             mgsc.runTests() (since there isn't a user to click
                             "run tests"). The reason we don't automatically run
                             tests in the normal version of the viewer interface
                             is so we don't delay the user.

                             ANYWAY: please don't change the following script's
                             ID from what it currently is! Otherwise, the
                             minify_files.fish script will fail.
                        -->
                        <script id="runTestsHere"></script>
                        <!--
                            Some sample elements for unit-testing interactions.
                            Their IDs should all start with "mochaTest" in
                            order to avoid conflicts.
                        -->
                        <button
                            class="btn btn-sm disabled"
                            id="mochaTestSampleButton"
                            disabled="disabled"
                            onclick="mgsc.mochaTestEmitSampleButtonClicked();"
                        >
                            <span
                                class="glyphicon glyphicon-exclamation-sign"
                                aria-hidden="true"
                            ></span>
                            &nbsp; Test Button
                        </button>
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-default"
                            data-dismiss="modal"
                        >
                            Close
                        </button>
                        <button
                            type="button"
                            class="btn btn-primary"
                            id="runTestsButton"
                            onclick="mgsc.runTests();"
                        >
                            Run tests
                        </button>
                    </div>
                </div>
                <!-- end modal-content -->
            </div>
            <!-- end modal-dialog -->
        </div>
        <!-- end modal -->
        <!-- XHR .db loader dialog -->
        <div class="modal fade" tabindex="-1" role="dialog" id="fsDialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close dialog"
                        >
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h4 class="modal-title">
                            Select a demo assembly file
                        </h4>
                    </div>
                    <!-- end modal-header div -->
                    <div class="modal-body">
                        <!-- NOTE: the data-mgscdbdirectory attribute of the
                             below span is prepended to every demo .db file's
                             URL when we try to load it in loadHostedDB().

                             A "/" character is added on the end of the
                             data-mgscdbdirectory attribute if the attribute:
                                1. isn't an empty string and
                                2. doesn't already end with a "/" character.

                             You can modify the attribute directly here, or you
                             can also change it via the populate_demo script
                             (using the -hd argument).

                             ALSO: note that in order for the populate_demo
                             script to work properly here, the id and
                             data-mgscdbdirectory attributes need to be
                             declared on the same line.
                        -->
                        <span
                            id="demoDir"
                            data-mgscdbdirectory="db"
                            class="notviewable"
                        ></span>
                        <!-- BEGIN DEMO .DB LIST -->
                        <div class="radio">
                            <label>
                                <input
                                    type="radio"
                                    name="fs"
                                    id="august1.db"
                                    checked="checked"
                                />
                                SRS049959: post-clean (GML, 28,064 contigs,
                                21,769 edges)
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input type="radio" name="fs" id="shakya.db" />
                                64-genome bacterial/archaeal metagenome from
                                <a
                                    target="_blank"
                                    href="http://www.ncbi.nlm.nih.gov/pubmed/23387867"
                                    ><em>Shakya et al.</em> 2013</a
                                >
                                (GML, 21,950 contigs, 23,501 edges)
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input
                                    type="radio"
                                    name="fs"
                                    id="shakya_new.db"
                                />
                                <a
                                    target="_blank"
                                    href="http://www.ncbi.nlm.nih.gov/pubmed/23387867"
                                    ><em>Shakya et al.</em></a
                                >
                                metagenome, simplified (GML, 379 contigs, 229
                                edges)
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input
                                    type="radio"
                                    name="fs"
                                    id="biofilm_judson.db"
                                />
                                Ship Hull Biofilm graph 1 (GML, 28,107 contigs,
                                23,405 edges)
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input
                                    type="radio"
                                    name="fs"
                                    id="biofilm_judson2.db"
                                />
                                Ship Hull Biofilm graph 2 (GML, 1,839 contigs,
                                530 edges)
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input
                                    type="radio"
                                    name="fs"
                                    id="marygoldtest.db"
                                />
                                <a
                                    target="_blank"
                                    href="https://www.ncbi.nlm.nih.gov/pubmed/24058058"
                                >
                                    MaryGold paper</a
                                >
                                Figure 2 graph (GML, 12 contigs, 16 edges)
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input
                                    type="radio"
                                    name="fs"
                                    id="small_ecoli.db"
                                />
                                E. coli (GML, 168 contigs, 470 edges)
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input type="radio" name="fs" id="ecoli.db" />
                                E. coli, included with
                                <a
                                    target="_blank"
                                    href="http://rrwick.github.io/Bandage"
                                    >Bandage</a
                                >
                                (LastGraph, 279 positive contigs, 332 positive
                                edges)
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input
                                    type="radio"
                                    name="fs"
                                    id="sample_LastGraph.db"
                                />
                                <code>sample_LastGraph</code>, included with
                                <a
                                    target="_blank"
                                    href="http://rrwick.github.io/Bandage"
                                    >Bandage</a
                                >
                                (LastGraph, 61 positive contigs, 82 positive
                                edges)
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input
                                    type="radio"
                                    name="fs"
                                    id="sample_gfa.db"
                                />
                                <code>sample.gfa</code>, from
                                <a
                                    target="_blank"
                                    href="https://github.com/sjackman/assembly-graph/blob/master/sample.gfa"
                                    >Shaun Jackman</a
                                >
                                (GFA, 6 positive contigs, 4 positive edges)
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input
                                    type="radio"
                                    name="fs"
                                    id="loop_gfa.db"
                                />
                                <code>loop.gfa</code>, from
                                <a
                                    target="_blank"
                                    href="https://github.com/sjackman/assembly-graph/blob/master/loop.gfa"
                                    >Shaun Jackman</a
                                >
                                (GFA, 4 positive contigs, 4 positive edges)
                            </label>
                        </div>
                        <!-- END DEMO .DB LIST -->
                    </div>
                    <!-- end modal-body div -->
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-default"
                            data-dismiss="modal"
                        >
                            Close
                        </button>
                        <button
                            type="button"
                            class="btn btn-primary"
                            id="loadDBbutton"
                            onclick="loadHostedDB();"
                        >
                            Load selected file
                        </button>
                    </div>
                </div>
                <!-- end modal-content div -->
            </div>
            <!-- end modal-dialog div -->
        </div>
        <!-- end modal div -->
        <!-- Settings dialog -->
        <div class="modal fade" tabindex="-1" role="dialog" id="settingsDialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close dialog"
                        >
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h4 class="modal-title">Settings</h4>
                    </div>
                    <!-- end modal-header div -->
                    <div class="modal-body">
                        <p>
                            Changes to most of the animation settings will take
                            effect without having to redraw the graph, if one
                            has already been drawn. (Animation settings where
                            this is not the case are marked as such in their
                            description.)
                        </p>
                        <p>
                            Changes to other parameters will only take effect
                            after redrawing the graph.
                        </p>
                        <div>
                            <ul class="nav nav-tabs" role="tablist">
                                <li role="presentation" class="active">
                                    <a
                                        href="#animationtab"
                                        aria-controls="animationtab"
                                        role="tab"
                                        data-toggle="tab"
                                    >
                                        Animation</a
                                    >
                                </li>
                                <li role="presentation">
                                    <a
                                        href="#performancetab"
                                        aria-controls="performancetab"
                                        role="tab"
                                        data-toggle="tab"
                                    >
                                        Performance</a
                                    >
                                </li>
                                <li role="presentation">
                                    <a
                                        href="#colortab"
                                        aria-controls="colortab"
                                        role="tab"
                                        data-toggle="tab"
                                    >
                                        Colors</a
                                    >
                                </li>
                                <li role="presentation">
                                    <a
                                        href="#keyboardtab"
                                        aria-controls="keyboardtab"
                                        role="tab"
                                        data-toggle="tab"
                                    >
                                        Keyboard Navigation</a
                                    >
                                </li>
                            </ul>
                            <div class="tab-content">
                                <div
                                    role="tabpanel"
                                    class="tab-pane active"
                                    id="animationtab"
                                >
                                    <div class="checkbox">
                                        <label>
                                            <input
                                                type="checkbox"
                                                id="autozoomClusterCheckbox"
                                            />
                                            Automatically zoom in on clicked
                                            node groups in standard mode (<em
                                                >Requires redrawing the graph
                                                for changes to take effect</em
                                            >)
                                        </label>
                                    </div>
                                    <div class="checkbox">
                                        <label>
                                            <input
                                                type="checkbox"
                                                checked
                                                id="animateFinishingCheckbox"
                                                onchange="toggleFinishingAnimationSettings();"
                                            />
                                            Automatically pan the viewport
                                            during finishing
                                        </label>
                                    </div>
                                    <!-- NOTE: there's a weird issue where this
                                        div, even when it's set with the
                                        notviewable class, seems to take up a
                                        little bit of vertical space in between
                                        the checkboxes. A small TODO is fixing
                                        this, although it's so minor an issue
                                        that it barely really matters.
                                    -->
                                    <div
                                        class="input-group input-group-sm"
                                        id="maxFinishingZoomDiv"
                                    >
                                        <span
                                            class="input-group-addon"
                                            id="maxFinishingZoomDesc"
                                        >
                                            Maximum zoom level during finishing
                                            animation
                                        </span>
                                        <input
                                            type="text"
                                            class="form-control"
                                            id="maxFinishingZoomLvl"
                                            value="1.2"
                                            aria-describedby="maxFinishingZoomDesc"
                                        />
                                    </div>
                                    <div class="checkbox">
                                        <label>
                                            <input
                                                type="checkbox"
                                                checked
                                                id="useProgressBarStripesCheckbox"
                                            />
                                            Show moving stripes on indeterminate
                                            progress bars
                                        </label>
                                    </div>
                                    <div class="checkbox">
                                        <label>
                                            <input
                                                type="checkbox"
                                                checked
                                                id="useDrawingStatusTextCheckbox"
                                            />
                                            Update status text while drawing
                                            connected components (for graphs
                                            that take a short amount of time to
                                            draw, this text might change
                                            relatively quickly)
                                        </label>
                                    </div>
                                </div>
                                <!-- end animationtab -->
                                <div
                                    role="tabpanel"
                                    class="tab-pane"
                                    id="performancetab"
                                >
                                    <div class="checkbox">
                                        <label>
                                            <input
                                                type="checkbox"
                                                id="hideEdgesCheckbox"
                                                onchange="toggleHEV();"
                                            />
                                            Hide edges during movement
                                        </label>
                                    </div>
                                    <div class="checkbox">
                                        <label>
                                            <input
                                                type="checkbox"
                                                id="useTexturesCheckbox"
                                                onchange="toggleUTV();"
                                            />
                                            Use a texture during movement
                                        </label>
                                    </div>
                                </div>
                                <!-- end performancetab -->
                                <div
                                    role="tabpanel"
                                    class="tab-pane"
                                    id="colortab"
                                >
                                    <!-- the margin-top:10px matches the
                                        default checkbox formatting in
                                        bootstrap, making switching between
                                        tabs look smooth.
                                    -->
                                    <div
                                        class="container-fluid"
                                        style="margin-top: 10px;"
                                    >
                                        <div class="row">
                                            <div class="col-lg-6">
                                                <button
                                                    class="btn btn-default btn-sm csbtn"
                                                    id="importColorSettingsButton"
                                                    onclick="$('#colorSettingsFS').click();"
                                                >
                                                    <span
                                                        class="glyphicon glyphicon-folder-open"
                                                        aria-hidden="true"
                                                    ></span>
                                                    &nbsp; Import color settings
                                                    file
                                                </button>
                                                <input
                                                    type="file"
                                                    id="colorSettingsFS"
                                                    onchange="importColorSettings();"
                                                    style="display: none;"
                                                />
                                            </div>
                                            <!-- end col-lg-6 div -->
                                            <div class="col-lg-6">
                                                <button
                                                    class="btn btn-default btn-sm csbtn"
                                                    id="exportColorSettingsButton"
                                                    onclick="exportColorSettings(true);"
                                                >
                                                    <span
                                                        class="glyphicon glyphicon-download-alt"
                                                        aria-hidden="true"
                                                    ></span>
                                                    &nbsp; Export color settings
                                                    file
                                                </button>
                                            </div>
                                            <!-- end col-lg-6 div -->
                                        </div>
                                        <!-- end row div -->
                                        <div class="row">
                                            <div class="col-lg-6">
                                                <button
                                                    class="btn btn-default btn-sm csbtn"
                                                    id="resetColorSettingsButton"
                                                    onclick="resetColorSettings();"
                                                >
                                                    <span
                                                        class="glyphicon glyphicon-refresh"
                                                        aria-hidden="true"
                                                    ></span>
                                                    &nbsp; Reset color settings
                                                    to defaults
                                                </button>
                                            </div>
                                            <div class="col-lg-6">
                                                <button
                                                    class="btn btn-default btn-sm csbtn"
                                                    id="invertColorsButton"
                                                    onclick="invertColorSettings();"
                                                >
                                                    <span
                                                        class="glyphicon glyphicon-adjust"
                                                        aria-hidden="true"
                                                    ></span>
                                                    &nbsp; Invert all color
                                                    settings
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- end container-fluid div -->
                                    <p>
                                        Color settings can be modified using the
                                        corresponding text boxes or their
                                        corresponding color pickers (accessible
                                        via clicking on the colored square in
                                        the right side of each text box).
                                    </p>
                                    <p>
                                        Colors can be entered in text boxes as
                                        RGB triplets (of the form
                                        <kbd>rgb(r, g, b)</kbd> where
                                        <kbd>r</kbd>, <kbd>g</kbd>, and
                                        <kbd>b</kbd> are integers in the range
                                        <kbd>[0, 255]</kbd>),
                                        <a
                                            href="https://en.wikipedia.org/wiki/Web_colors#Hex_triplet"
                                            >hex triplets</a
                                        >, or
                                        <a
                                            href="https://en.wikipedia.org/wiki/Web_colors#X11_color_names"
                                            >HTML color names.</a
                                        >
                                    </p>
                                    <p>
                                        Changes to the two extreme colors used
                                        for node colorization (for 0% and 100%)
                                        will also adjust the below gradient
                                        accordingly, to give a preview of the
                                        resulting colorization scheme.
                                    </p>
                                    <!-- Colorpickers for node colorization -->
                                    <!-- Gradient preview -->
                                    <div class="gradient_preview nonselectable">
                                        <span id="0gp">
                                            &nbsp;&nbsp;&nbsp;&nbsp;</span
                                        >
                                        <span id="25gp">
                                            &nbsp;&nbsp;&nbsp;&nbsp;</span
                                        >
                                        <span id="50gp">
                                            &nbsp;&nbsp;&nbsp;&nbsp;</span
                                        >
                                        <span id="75gp">
                                            &nbsp;&nbsp;&nbsp;&nbsp;</span
                                        >
                                        <span id="100gp">
                                            &nbsp;&nbsp;&nbsp;&nbsp;</span
                                        >
                                    </div>
                                    <!-- NOTE changes to the below colors'
                                        defaults (or additions of more colors)
                                        should be mirrored in the declaration
                                        of DEFAULT_COLOR_SETTINGS in xdot2cy.js
                                    -->
                                    <div class="container-fluid">
                                        <div class="row">
                                            <!-- Left column -->
                                            <div class="col-lg-6">
                                                <label
                                                    class="cplabel"
                                                    for="mincncp_id"
                                                >
                                                    Nodes (colorized: 0%)</label
                                                >
                                                <!-- CODELINK: for bootstrap-colorpicker
                                            colorpickers, an otherwise empty
                                            <span> containing an (empty) <i> is
                                            needed to display a properly
                                            formatted color "preview." (I've
                                            tested this, and it looks like
                                            similar tags like <b> or <u> won't
                                            work properly; it has to be an <i>.)

                                            See the "As a component" example in
                                            https://farbelous.io/bootstrap-colorpicker/v2/
                                            for details on this. The
                                            colorpickers' code in this file was
                                            adapted from this example. -->
                                                <div
                                                    id="mincncp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#0022ff"
                                                        class="form-control"
                                                        id="mincncp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                            </div>
                                            <!-- Right column -->
                                            <div class="col-lg-6">
                                                <label
                                                    class="cplabel"
                                                    for="maxcncp_id"
                                                >
                                                    Nodes (colorized:
                                                    100%)</label
                                                >
                                                <div
                                                    id="maxcncp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#ff2200"
                                                        class="form-control"
                                                        id="maxcncp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Colorpickers for labels of colorized
                                        nodes; placed here in order to be
                                        close to other node colorization
                                        colorpickers -->
                                        <div class="row">
                                            <div class="col-lg-6">
                                                <label
                                                    class="cplabel"
                                                    for="cnlcp_id"
                                                >
                                                    Node labels
                                                    (colorized)</label
                                                >
                                                <div
                                                    id="cnlcp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#aaaaaa"
                                                        class="form-control"
                                                        id="cnlcp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                            </div>
                                            <!-- Right column -->
                                            <div class="col-lg-6">
                                                <label
                                                    class="cplabel"
                                                    for="csnlcp_id"
                                                >
                                                    Node labels (colorized,
                                                    selected)
                                                </label>
                                                <div
                                                    id="csnlcp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#aaaaaa"
                                                        class="form-control"
                                                        id="csnlcp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Colorpickers for non-node-
                                        colorization stuff -->
                                        <div class="row">
                                            <!-- Left column of colorpickers -->
                                            <div class="col-lg-6">
                                                <label
                                                    class="cplabel"
                                                    for="usncp_id"
                                                >
                                                    Nodes (default)</label
                                                >
                                                <div
                                                    id="usncp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#888888"
                                                        class="form-control"
                                                        id="usncp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="sncp_id"
                                                >
                                                    Nodes (default,
                                                    selected)</label
                                                >
                                                <div
                                                    id="sncp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#444444"
                                                        class="form-control"
                                                        id="sncp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="bubblecp_id"
                                                >
                                                    Bubbles</label
                                                >
                                                <div
                                                    id="bubblecp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#9abaf3"
                                                        class="form-control"
                                                        id="bubblecp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="fropecp_id"
                                                >
                                                    Frayed Ropes</label
                                                >
                                                <div
                                                    id="fropecp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#59f459"
                                                        class="form-control"
                                                        id="fropecp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="chaincp_id"
                                                >
                                                    Chains</label
                                                >
                                                <div
                                                    id="chaincp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#fcaca3"
                                                        class="form-control"
                                                        id="chaincp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="ychaincp_id"
                                                >
                                                    Cyclic Chains</label
                                                >
                                                <div
                                                    id="ychaincp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#ffd163"
                                                        class="form-control"
                                                        id="ychaincp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="spqrscp_id"
                                                >
                                                    Series Metanodes</label
                                                >
                                                <div
                                                    id="spqrscp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#FFD644"
                                                        class="form-control"
                                                        id="spqrscp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="spqrpcp_id"
                                                >
                                                    Parallel Metanodes</label
                                                >
                                                <div
                                                    id="spqrpcp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#EB8EF9"
                                                        class="form-control"
                                                        id="spqrpcp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="spqrrcp_id"
                                                >
                                                    Rigid Metanodes</label
                                                >
                                                <div
                                                    id="spqrrcp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#31BF6F"
                                                        class="form-control"
                                                        id="spqrrcp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="bicmpcp_id"
                                                >
                                                    Bicomponent Nodes</label
                                                >
                                                <div
                                                    id="bicmpcp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#e9e9e9"
                                                        class="form-control"
                                                        id="bicmpcp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="tnbcp_id"
                                                >
                                                    Finishing Candidate Node
                                                    borders
                                                </label>
                                                <div
                                                    id="tnbcp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#ff6600"
                                                        class="form-control"
                                                        id="tnbcp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="tngbcp_id"
                                                >
                                                    Finishing Candidate Node
                                                    Group borders
                                                </label>
                                                <div
                                                    id="tngbcp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#ff6600"
                                                        class="form-control"
                                                        id="tngbcp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="miscpatterncp_id"
                                                >
                                                    Misc. user-specified
                                                    patterns
                                                </label>
                                                <div
                                                    id="miscpatterncp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#c398eb"
                                                        class="form-control"
                                                        id="miscpatterncp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                            </div>
                                            <!-- Right column of colorpickers -->
                                            <div class="col-lg-6">
                                                <label
                                                    class="cplabel"
                                                    for="usnlcp_id"
                                                >
                                                    Node labels (default)</label
                                                >
                                                <div
                                                    id="usnlcp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#000000"
                                                        class="form-control"
                                                        id="usnlcp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="snlcp_id"
                                                >
                                                    Node labels (default,
                                                    selected)
                                                </label>
                                                <div
                                                    id="snlcp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#aaaaaa"
                                                        class="form-control"
                                                        id="snlcp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="usecp_id"
                                                >
                                                    Edges (default)</label
                                                >
                                                <div
                                                    id="usecp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#555555"
                                                        class="form-control"
                                                        id="usecp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="secp_id"
                                                >
                                                    Edges (default,
                                                    selected)</label
                                                >
                                                <div
                                                    id="secp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#111111"
                                                        class="form-control"
                                                        id="secp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="hoecp_id"
                                                >
                                                    Edges (high outlier)</label
                                                >
                                                <div
                                                    id="hoecp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#ff0000"
                                                        class="form-control"
                                                        id="hoecp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="hosecp_id"
                                                >
                                                    Edges (high outlier,
                                                    selected)
                                                </label>
                                                <div
                                                    id="hosecp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#800000"
                                                        class="form-control"
                                                        id="hosecp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="loecp_id"
                                                >
                                                    Edges (low outlier)</label
                                                >
                                                <div
                                                    id="loecp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#0000ff"
                                                        class="form-control"
                                                        id="loecp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="losecp_id"
                                                >
                                                    Edges (low outlier,
                                                    selected)
                                                </label>
                                                <div
                                                    id="losecp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#000080"
                                                        class="form-control"
                                                        id="losecp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="cngcccp_id"
                                                >
                                                    Node Group "child count"
                                                    labels
                                                </label>
                                                <div
                                                    id="cngcccp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#000000"
                                                        class="form-control"
                                                        id="cngcccp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="sngbcp_id"
                                                >
                                                    Selected Node Group
                                                    borders</label
                                                >
                                                <div
                                                    id="sngbcp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#000000"
                                                        class="form-control"
                                                        id="sngbcp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="cpcp_id"
                                                >
                                                    Nodes and Node Groups Added
                                                    to Finishing Path
                                                </label>
                                                <div
                                                    id="cpcp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#994700"
                                                        class="form-control"
                                                        id="cpcp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                                <label
                                                    class="cplabel"
                                                    for="bgcp_id"
                                                >
                                                    Graph background</label
                                                >
                                                <div
                                                    id="bgcp"
                                                    class="input-group colorpicker-component"
                                                >
                                                    <input
                                                        type="text"
                                                        value="#FFFFFF"
                                                        class="form-control"
                                                        id="bgcp_id"
                                                    />
                                                    <span
                                                        class="input-group-addon"
                                                    >
                                                        <i></i
                                                    ></span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- end row div -->
                                    </div>
                                    <!-- end container-fluid div -->
                                </div>
                                <!-- end colortab -->
                                <div
                                    role="tabpanel"
                                    class="tab-pane"
                                    id="keyboardtab"
                                >
                                    <div class="checkbox">
                                        <label>
                                            <input
                                                type="checkbox"
                                                id="enableClusterNavCheckbox"
                                                onchange="toggleClusterNav();"
                                            />
                                            Enable navigation through standard
                                            mode node groups with left/right
                                            arrow keys and A/D keys (supported
                                            in desktop browsers only)
                                        </label>
                                    </div>
                                </div>
                                <!-- end keyboardtab -->
                            </div>
                            <!-- end tab-content -->
                        </div>
                        <!-- end tab div -->
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-default"
                            data-dismiss="modal"
                        >
                            Close
                        </button>
                    </div>
                </div>
                <!-- end modal-content div -->
            </div>
            <!-- end modal-dialog div -->
        </div>
        <!-- end modal div -->
        <!-- Edge filtering dialog -->
        <div
            class="modal fade"
            tabindex="-1"
            role="dialog"
            id="edgeFilteringDialog"
        >
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close dialog"
                        >
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h4 class="modal-title">Filter edges by weight</h4>
                    </div>
                    <!-- end modal-header div -->
                    <div class="modal-body">
                        <svg
                            id="edgeWeightChart"
                            width="550"
                            height="200"
                        ></svg>

                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="input-group input-group-sm">
                                        <input
                                            type="text"
                                            class="form-control"
                                            id="binCountInput"
                                            value="20"
                                        />
                                        <span class="input-group-btn">
                                            <button
                                                class="btn btn-default"
                                                onclick="drawEdgeWeightHistogram();"
                                                type="button"
                                                id="setBinCountButton"
                                            >
                                                <span
                                                    class="glyphicon glyphicon-resize-horizontal"
                                                    aria-hidden="true"
                                                ></span>
                                                &nbsp; Change histogram bin
                                                count
                                            </button>
                                        </span>
                                    </div>
                                </div>
                                <!-- end col 1 -->
                                <div class="col-lg-6">
                                    <!-- NOTE this feature doesn't work very well with
                            collapsing yet -->
                                    <div class="input-group input-group-sm">
                                        <input
                                            type="text"
                                            class="form-control"
                                            id="cullEdgesInput"
                                            value="0"
                                        />
                                        <span class="input-group-btn">
                                            <button
                                                class="btn btn-default"
                                                onclick="cullEdges();"
                                                type="button"
                                                id="cullEdgesButton"
                                            >
                                                <span
                                                    class="glyphicon glyphicon-remove"
                                                    aria-hidden="true"
                                                ></span>
                                                &nbsp; Hide edges below weight
                                            </button>
                                        </span>
                                    </div>
                                </div>
                                <!-- end col 2 -->
                            </div>
                            <!-- end row 1 -->
                            <div class="row" style="margin-top: 1em;">
                                <div class="alert alert-warning" role="alert">
                                    <strong
                                        >These controls are still under
                                        development.</strong
                                    >
                                    They may not function correctly in certain
                                    cases.
                                </div>
                                <!-- end alert -->
                            </div>
                            <!-- end row 2 -->
                        </div>
                        <!-- end container-fluid -->
                    </div>
                    <!-- end modal-body div -->
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-default"
                            data-dismiss="modal"
                        >
                            Close
                        </button>
                    </div>
                    <!-- end modal-footer div -->
                </div>
                <!-- end modal-content div -->
            </div>
            <!-- end modal-dialog div -->
        </div>
        <!-- end modal div -->
        <!-- Assembly info dialog -->
        <div class="modal fade" tabindex="-1" role="dialog" id="infoDialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close dialog"
                        >
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h4 class="modal-title">
                            Assembly information
                        </h4>
                    </div>
                    <!-- end modal-header div -->
                    <div class="modal-body">
                        <div class="table-responsive">
                            <table
                                class="table table-condensed table-bordered asmInfoTable"
                            >
                                <tr>
                                    <th>Input Filename</th>
                                    <th>Input Filetype</th>
                                    <th id="asmNodeCtTH">
                                        Positive Node Count
                                    </th>
                                    <th id="asmEdgeCtTH">
                                        Positive Edge Count
                                    </th>
                                </tr>
                                <tr>
                                    <td id="filenameEntry"></td>
                                    <td id="filetypeEntry"></td>
                                    <td id="nodeCtEntry"></td>
                                    <td id="edgeCountEntry"></td>
                                </tr>
                            </table>
                        </div>
                        <div class="table-responsive">
                            <table
                                class="table table-condensed table-bordered asmInfoTable"
                            >
                                <tr>
                                    <th id="sccCountTH">
                                        SPQR Decomposition Mode Connected
                                        Component Count
                                    </th>
                                    <th id="bicmpCountTH">
                                        Biconnected Component Count
                                    </th>
                                    <th id="connCmpCtTH">
                                        Standard Mode Connected Component Count
                                    </th>
                                </tr>
                                <tr>
                                    <td id="sccCountEntry"></td>
                                    <td id="bicmpCountEntry"></td>
                                    <td id="connCmpCtEntry"></td>
                                </tr>
                            </table>
                        </div>
                        <div class="table-responsive">
                            <table
                                class="table table-condensed table-bordered asmInfoTable"
                            >
                                <tr>
                                    <th id="asmNodeLenTH">
                                        Total Positive Node Length
                                    </th>
                                    <th>N50</th>
                                    <th id="asmGCTH">Assembly GC Content</th>
                                </tr>
                                <tr>
                                    <td id="totalBPLengthEntry"></td>
                                    <td id="n50Entry"></td>
                                    <td id="asmGCEntry"></td>
                                </tr>
                            </table>
                        </div>
                        <p id="currComponentInfo">
                            No connected component has been drawn yet.
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-default"
                            data-dismiss="modal"
                        >
                            Close
                        </button>
                    </div>
                </div>
                <!-- end modal-content div -->
            </div>
            <!-- end modal-dialog div -->
        </div>
        <!-- end modal div -->
    </body>
    <script data-main="main" src="vendor/js/require.js"></script>
</html>
